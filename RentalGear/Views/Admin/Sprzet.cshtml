@model List<Sprzet>
@{ ViewData["Title"] = "Zarządzanie sprzętem"; }

<div class="page-header d-flex justify-content-between align-items-center">
    <h1 class="page-title"><i class="bi bi-camera me-2"></i>Sprzęt</h1>
    <div>
        <a asp-action="Index" class="btn btn-outline-secondary me-2"><i class="bi bi-arrow-left me-1"></i>Dashboard</a>
        <a asp-action="DodajSprzet" class="btn btn-primary"><i class="bi bi-plus-circle me-1"></i>Dodaj sprzęt</a>
    </div>
</div>

<div class="card">
    <div class="table-responsive">
        <table class="table mb-0">
            <thead><tr><th>Zdjęcie</th><th>Nazwa</th><th>Kategoria</th><th>Cena/dzień</th><th>Ilość</th><th>Status</th><th>Akcje</th></tr></thead>
            <tbody>
                @foreach (var s in Model)
                {
                    <tr class="@(!s.Dostepny ? "opacity-50" : "")">
                        <td>
                            @if (!string.IsNullOrEmpty(s.ZdjecieUrl))
                            {
                                <img src="@s.ZdjecieUrl" style="width:60px;height:40px;object-fit:cover;border-radius:4px">
                            }
                            else
                            {
                                <div style="width:60px;height:40px;background:var(--bg-tertiary);border-radius:4px;display:flex;align-items:center;justify-content:center">
                                    <i class="bi bi-camera text-secondary"></i>
                                </div>
                            }
                        </td>
                        <td><strong>@s.Producent</strong><br><small class="text-secondary">@s.Nazwa</small></td>
                        <td>@s.Kategoria?.Nazwa</td>
                        <td>@s.CenaDzien.ToString("N0") zł</td>
                        <td>@s.IloscDostepna / @s.IloscCalkowita</td>
                        <td>
                            @if (s.Dostepny) { <span class="badge bg-success">Dostępny</span> }
                            else { <span class="badge bg-secondary">Nieaktywny</span> }
                            @if (s.Wyrozniony) { <span class="badge bg-warning text-dark">★</span> }
                            @if (s.Nowosc) { <span class="badge bg-danger">New</span> }
                        </td>
                        <td>
                            <a asp-action="EdytujSprzet" asp-route-id="@s.Id" class="btn btn-outline-primary btn-sm"><i class="bi bi-pencil"></i></a>
                            <form asp-action="UsunSprzet" asp-route-id="@s.Id" method="post" class="d-inline" onsubmit="return confirm('Dezaktywować?')">
                                <button type="submit" class="btn btn-outline-danger btn-sm"><i class="bi bi-trash"></i></button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>